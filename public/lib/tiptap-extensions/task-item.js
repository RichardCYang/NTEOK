/* esm.sh - @tiptap/extension-task-item@2.0.0-beta.209 */
import{Node as k,mergeAttributes as m,wrappingInputRule as b}from "@tiptap/core";var f=/^\s*(\[([( |x])?\])\s$/,A=k.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{}}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>e.getAttribute("data-checked")==="true",renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:i}){return["li",m(this.options.HTMLAttributes,i,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){let e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:i,getPos:o,editor:r})=>{let c=document.createElement("li"),a=document.createElement("label"),l=document.createElement("span"),t=document.createElement("input"),h=document.createElement("div");return a.contentEditable="false",t.type="checkbox",t.addEventListener("change",n=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){t.checked=!t.checked;return}let{checked:s}=n.target;r.isEditable&&typeof o=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:u})=>{let p=o(),d=u.doc.nodeAt(p);return u.setNodeMarkup(p,void 0,{...d?.attrs,checked:s}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,s)||(t.checked=!t.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([n,s])=>{c.setAttribute(n,s)}),c.dataset.checked=e.attrs.checked,e.attrs.checked&&t.setAttribute("checked","checked"),a.append(t,l),c.append(a,h),Object.entries(i).forEach(([n,s])=>{c.setAttribute(n,s)}),{dom:c,contentDOM:h,update:n=>n.type!==this.type?!1:(c.dataset.checked=n.attrs.checked,n.attrs.checked?t.setAttribute("checked","checked"):t.removeAttribute("checked"),!0)}}},addInputRules(){return[b({find:f,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}});export{A as TaskItem,A as default,f as inputRegex};
//# sourceMappingURL=extension-task-item.bundle.mjs.map